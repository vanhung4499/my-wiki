---
title: OAuth 2.0ï¼ˆSSO å•ç‚¹ç™»å½•)
tags: ['project', 'java', 'spring-boot', 'spring-cloud']
categories: ['project']
order: 34
---
# OAuth 2.0ï¼ˆSSO å•ç‚¹ç™»å½•)

## [#](#oauth-2-0-æ˜¯ä»€ä¹ˆ) OAuth 2.0 æ˜¯ä»€ä¹ˆï¼Ÿ

 OAuth 2.0 çš„æ¦‚å¿µè®²è§£ï¼Œå¯ä»¥é˜…è¯»å¦‚ä¸‹ä¸‰ç¯‡æ–‡ç« ï¼š

 * [ã€Šç†è§£ OAuth 2.0ã€‹  (opens new window)](https://www.iocoder.cn/Fight/ruanyifeng-oauth_2_0/?self)
* [ã€ŠOAuth 2.0 çš„ä¸€ä¸ªç®€å•è§£é‡Šã€‹  (opens new window)](https://www.iocoder.cn/Fight/ruanyifeng-oauth_design/?self)
* [ã€ŠOAuth 2.0 çš„å››ç§æ–¹å¼ã€‹  (opens new window)](https://www.iocoder.cn/Fight/ruanyifeng-oauth-grant-types/?self)

 é‡ç‚¹æ˜¯ç†è§£ **æˆæƒç æ¨¡å¼** å’Œ **å¯†ç æ¨¡å¼**ï¼Œå®ƒä»¬æ˜¯æœ€å¸¸ç”¨çš„ä¸¤ç§æˆæƒæ¨¡å¼ã€‚

 æœ¬æ–‡ï¼Œæˆ‘ä»¬ä¹Ÿä¼šåŸºäºå®ƒä»¬ï¼Œåˆ†åˆ«å®ç° SSO å•ç‚¹ç™»å½•ã€‚

 ## [#](#oauth-2-0-æˆæƒæ¨¡å¼çš„é€‰æ‹©) OAuth 2.0 æˆæƒæ¨¡å¼çš„é€‰æ‹©ï¼Ÿ

 æˆæƒæ¨¡å¼çš„é€‰æ‹©ï¼Œå…¶å®éå¸¸ç®€å•ï¼Œæ€»ç»“èµ·æ¥å°±æ˜¯ä¸€å¼ å›¾ï¼š

 ![æˆæƒæ¨¡å¼çš„é€‰æ‹©](https://doc.iocoder.cn/img/OAuth2/%E6%8E%88%E6%9D%83%E6%A8%A1%E5%BC%8F%E7%9A%84%E9%80%89%E6%8B%A9.png)

 é—®é¢˜ä¸€ï¼šä»€ä¹ˆåœºæ™¯ä¸‹ï¼Œä½¿ç”¨å®¢æˆ·ç«¯æ¨¡å¼ï¼ˆClient Credentialsï¼‰ï¼Ÿ

 å¦‚æœä»¤ç‰Œæ‹¥æœ‰è€…æ˜¯**æœºå™¨**çš„æƒ…å†µä¸‹ï¼Œé‚£å°±ä½¿ç”¨å®¢æˆ·ç«¯æ¨¡å¼ã€‚ ä¾‹å¦‚è¯´ï¼š

 * å¼€å‘äº†ä¸€ä¸ªå¼€æ”¾å¹³å°ï¼Œæä¾›ç»™å…¶å®ƒå¤–éƒ¨æœåŠ¡è°ƒç”¨
* å¼€å‘äº†ä¸€ä¸ª RPC æœåŠ¡ï¼Œæä¾›ç»™å…¶å®ƒå†…éƒ¨æœåŠ¡è°ƒç”¨

 å®é™…çš„æ¡ˆä¾‹ï¼Œæˆ‘ä»¬æ¥å…¥å¾®ä¿¡å…¬ä¼—å·æ—¶ï¼Œä¼šä½¿ç”¨ `appid` å’Œ `secret` å‚æ•°ï¼Œ[è·å– Access token  (opens new window)](https://developers.weixin.qq.com/doc/offiaccount/Basic_Information/Get_access_token.html) è®¿é—®ä»¤ç‰Œã€‚

 é—®é¢˜äºŒï¼šä»€ä¹ˆåœºæ™¯ä¸‹ï¼Œä½¿ç”¨å¯†ç æ¨¡å¼ï¼ˆResource Owner Password Credentialsï¼‰ï¼Ÿ

 æ¥å…¥çš„ Client å®¢æˆ·ç«¯ï¼Œæ˜¯å±äº**è‡ªå·±**çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨å¯†ç æ¨¡å¼ã€‚ ä¾‹å¦‚è¯´ï¼š

 * å®¢æˆ·ç«¯æ˜¯ä½ è‡ªå·±å…¬å¸çš„ App æˆ–ç½‘é¡µï¼Œç„¶åæˆæƒæœåŠ¡ä¹Ÿæ˜¯ä½ å…¬å¸çš„

 ä¸è¿‡ï¼Œå¦‚æœå®¢æˆ·ç«¯æ˜¯**ç¬¬ä¸‰æ–¹**çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨å¯†ç æ¨¡å¼çš„è¯ï¼Œè¯¥å®¢æˆ·ç«¯æ˜¯å¯ä»¥æ‹¿åˆ°ç”¨æˆ·çš„è´¦å·ã€å¯†ç ï¼Œå­˜åœ¨å®‰å…¨çš„é£é™©ï¼Œæ­¤æ—¶å¯ä»¥è€ƒè™‘ä½¿ç”¨æˆæƒç æˆ–ç®€åŒ–æ¨¡å¼ã€‚

 é—®é¢˜ä¸‰ï¼šä»€ä¹ˆåœºæ™¯ä¸‹ï¼Œä½¿ç”¨æˆæƒç æ¨¡å¼ï¼ˆAuthorization Codeï¼‰ï¼Ÿ

 æ¥å…¥çš„ Client å®¢æˆ·ç«¯ï¼Œæ˜¯å±äº**ç¬¬ä¸‰æ–¹**çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨æˆæƒç æ¨¡å¼ã€‚ä¾‹å¦‚è¯´ï¼š

 * å®¢æˆ·ç«¯æ˜¯ä½ è‡ªå·±å…¬å¸çš„ App æˆ–ç½‘é¡µï¼Œä½œä¸ºç¬¬ä¸‰æ–¹ï¼Œæ¥å…¥ [å¾®ä¿¡  (opens new window)](https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/Wechat_webpage_authorization.html)ã€[QQ  (opens new window)](https://wiki.connect.qq.com/oauth2-0%E7%AE%80%E4%BB%8B)ã€[é’‰é’‰  (opens new window)](https://open.dingtalk.com/document/mobile-app-guide/mobile-application-access) ç­‰ç­‰è¿›è¡Œ OAuth 2.0 ç™»å½•

 å½“ç„¶ï¼Œå¦‚æœå®¢æˆ·ç«¯æ˜¯**è‡ªå·±**çš„æƒ…å†µä¸‹ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨æˆæƒç æ¨¡å¼ã€‚ä¾‹å¦‚è¯´ï¼š

 * å®¢æˆ·ç«¯æ˜¯è…¾è®¯æ——ä¸‹çš„å„ç§æ¸¸æˆï¼Œå¯ä½¿ç”¨å¾®ä¿¡ã€QQï¼Œæ¥å…¥ [å¾®ä¿¡  (opens new window)](https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/Wechat_webpage_authorization.html)ã€[QQ  (opens new window)](https://wiki.connect.qq.com/oauth2-0%E7%AE%80%E4%BB%8B) ç­‰ç­‰è¿›è¡Œ OAuth 2.0 ç™»å½•
* å®¢æˆ·ç«¯æ˜¯å…¬å¸å†…çš„å„ç§ç®¡ç†åå°ï¼ˆERPã€OAã€CRM ç­‰ï¼‰ï¼Œè·³è½¬åˆ°ç»Ÿä¸€çš„ SSO å•ç‚¹ç™»å½•ï¼Œä½¿ç”¨æˆæƒç æ¨¡å¼è¿›è¡Œæˆæƒ

 é—®é¢˜å››ï¼šä»€ä¹ˆåœºæ™¯ä¸‹ï¼Œä½¿ç”¨ç®€åŒ–æ¨¡å¼ï¼ˆImplicitï¼‰ï¼Ÿ

 ç®€åŒ–æ¨¡å¼ï¼Œ**ç®€åŒ–** çš„æ˜¯æˆæƒç æ¨¡å¼çš„æµç¨‹çš„ **ç¬¬äºŒæ­¥**ï¼Œå·®å¼‚åœ¨äºï¼š

 * æˆæƒç æ¨¡å¼ï¼šæˆæƒå®Œæˆåï¼Œè·å¾—çš„æ˜¯ code æˆæƒç ï¼Œéœ€è¦ Server Side æœåŠ¡ç«¯ä½¿ç”¨è¯¥æˆæƒç ï¼Œå†å‘æˆæƒæœåŠ¡å™¨è·å– Access Token è®¿é—®ä»¤ç‰Œ
* ç®€åŒ–æ¨¡å¼ï¼šæˆæƒå®Œæˆåï¼ŒClient Side å®¢æˆ·ç«¯ç›´æ¥è·å¾— Access Token è®¿é—®ä»¤ç‰Œ

 æš‚æ—¶æ²¡æœ‰ç‰¹åˆ«å¥½çš„æ¡ˆä¾‹ï¼Œæ„Ÿå…´è¶£å¯ä»¥çœ‹çœ‹å¦‚ä¸‹æ–‡æ¡£ï¼Œä¹Ÿå¯ä»¥ä¸çœ‹ï¼š

 * [ã€ŠQQ OAuth 2.0 å¼€å‘æŒ‡å®š â€”â€” å¼€å‘æ”»ç•¥\_Client-sideã€‹  (opens new window)](https://wiki.connect.qq.com/%e5%bc%80%e5%8f%91%e6%94%bb%e7%95%a5_client-side)
* [ã€Šç™¾åº¦ OAuth â€”â€” Implicit Grant æˆæƒã€‹  (opens new window)](http://developer.baidu.com/wiki/index.php?title=docs/oauth/implicit)

 é—®é¢˜äº”ï¼šè¯¥é¡¹ç›®ä¸­ï¼Œä½¿ç”¨äº†å“ªäº›æˆæƒæ¨¡å¼ï¼Ÿ

 ![é¡¹ç›®ä½¿ç”¨çš„æˆæƒæ¨¡å¼](https://doc.iocoder.cn/img/OAuth2/%E9%A1%B9%E7%9B%AE%E4%BD%BF%E7%94%A8%E7%9A%84%E6%8E%88%E6%9D%83%E6%A8%A1%E5%BC%8F.png)

 å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œåˆ†æˆ **å¤–éƒ¨æˆæƒ** å’Œ **å†…éƒ¨ç™»å½•** ä¸¤ç§æ–¹å¼ã€‚

 â‘  çº¢è‰²çš„â€œå¤–éƒ¨æˆæƒâ€ï¼šåŸºäºã€æˆæƒç æ¨¡å¼ã€‘ï¼Œå®ç° SSO å•ç‚¹ç™»å½•ï¼Œå°†ç”¨æˆ·æˆæƒç»™æ¥å…¥çš„å®¢æˆ·ç«¯ã€‚å®¢æˆ·ç«¯å¯ä»¥æ˜¯å†…éƒ¨çš„å…¶å®ƒç®¡ç†ç³»ç»Ÿï¼Œä¹Ÿå¯ä»¥æ˜¯å¤–éƒ¨çš„ç¬¬ä¸‰æ–¹ã€‚

 â‘¡ ç»¿è‰²çš„â€œå†…éƒ¨ç™»å½•â€ï¼šç®¡ç†åå°çš„ç™»å½•æ¥å£ï¼Œè¿˜æ˜¯é‡‡ç”¨ä¼ ç»Ÿçš„ [`/admin-api/system/auth/login`  (opens new window)](https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/controller/admin/auth/AuthController.java#L61-L67) è´¦å·å¯†ç ç™»å½•ï¼Œå¹¶æ²¡æœ‰ä½¿ç”¨ã€å¯†ç æ¨¡å¼ã€‘ï¼Œä¸»è¦è€ƒè™‘é™ä½å¤§å®¶çš„å­¦ä¹ æˆæœ¬ï¼Œå¦‚æœæ²¡æœ‰å°†ç”¨æˆ·æˆæƒç»™å…¶å®ƒç³»ç»Ÿçš„æƒ…å†µä¸‹ï¼Œè¿™æ ·åšå·²ç»å¯ä»¥å¾ˆå¥½çš„æ»¡è¶³ä¸šåŠ¡çš„éœ€è¦ã€‚å½“ç„¶ï¼Œè¿™é‡Œä¹Ÿå¯ä»¥å°†ç®¡ç†åå°ä½œä¸ºä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œä½¿ç”¨ã€å¯†ç æ¨¡å¼ã€‘è¿›è¡Œæˆæƒã€‚

 å¦å¤–ï¼Œè€ƒè™‘åˆ° OAuth 2.0 ä½¿ç”¨çš„è®¿é—®ä»¤ç‰Œ + åˆ·æ–°ä»¤ç‰Œå¯ä»¥æä¾›æ›´å¥½çš„å®‰å…¨æ€§ï¼Œæ‰€ä»¥å³ä½¿æ˜¯ä¼ ç»Ÿçš„è´¦å·å¯†ç ç™»å½•ï¼Œä¹Ÿå¤ç”¨äº†å®ƒä½œä¸ºä»¤ç‰Œçš„å®ç°ã€‚

 ## [#](#oauth-2-0-æŠ€æœ¯é€‰å‹) OAuth 2.0 æŠ€æœ¯é€‰å‹ï¼Ÿ

 å®ç° OAuth 2.0 çš„åŠŸèƒ½ï¼Œä¸€èˆ¬é‡‡ç”¨ [Spring Security OAuth  (opens new window)](https://spring.io/projects/spring-security-oauth) æˆ– [Spring Authorization Server  (opens new window)](https://spring.io/projects/spring-authorization-server)(SAS) æ¡†æ¶ï¼Œå‰è€…å·²åºŸå¼ƒï¼Œè¢«åè€…æ‰€æ›¿ä»£ã€‚ä½†æ˜¯ä½¿ç”¨å®ƒä»¬ï¼Œä¼šé¢ä¸´ä¸‰å¤§é—®é¢˜ï¼š

 * å­¦ä¹ æˆæœ¬å¤§ï¼šSAS æ˜¯æ–°å‡ºçš„æ¡†æ¶ï¼Œå…¥é—¨å®¹æ˜“ç²¾é€šéš¾ï¼Œå¼•å…¥é¡¹ç›®ä¸­éœ€è¦èŠ±è´¹ 1-2 å‘¨æ·±å…¥å­¦ä¹ 
* æ’æŸ¥é—®é¢˜éš¾ï¼šä½¿ç”¨ç¢°åˆ°é—®é¢˜æ—¶ï¼Œå¾€å¾€éœ€è¦è°ƒè¯•åˆ°æºç å±‚é¢ï¼Œå›¢é˜Ÿåªæœ‰ä¸ªåˆ«äººå…·å¤‡è¿™ç§èƒ½åŠ›
* å®šåˆ¶æˆæœ¬é«˜ï¼šæ ¹æ®ä¸šåŠ¡éœ€è¦ï¼Œæƒ³è¦åœ¨ SAS ä¸Šå®šåˆ¶åŠŸèƒ½ï¼Œå¯¹æºç è¦æœ‰ä¸é”™çš„æŒæ§åŠ›ï¼Œéš¾åº¦å¯èƒ½è¿‡å¤§

 âš” å› æ­¤ï¼Œé¡¹ç›®å‚è€ƒå¤šä¸ª OAuth 2.0 æ¡†æ¶ï¼Œ**è‡ªç ”**å®ç° OAuth 2.0 çš„åŠŸèƒ½ï¼Œå…·å¤‡å­¦ä¹ æˆæœ¬å°ã€æ’æŸ¥é—®é¢˜å®¹æ˜“ã€å®šåˆ¶æˆæœ¬ä½çš„ä¼˜ç‚¹ï¼Œæ”¯æŒå¤šç§æˆæƒæ¨¡å¼ï¼Œå¹¶å†…ç½® SSO å•ç‚¹ç™»å½•çš„åŠŸèƒ½ã€‚

 å‹æƒ…æç¤ºï¼šå…·å¤‡ä¸€å®šè§„æ¨¡çš„äº’è”ç½‘å…¬å¸ï¼ŒåŸºæœ¬ä¸ä¼šç›´æ¥é‡‡ç”¨ Spring Security OAuth æˆ– Spring Authorization Server æ¡†æ¶ï¼Œä¹Ÿæ˜¯é‡‡ç”¨è‡ªç ”çš„æ–¹å¼ï¼Œæ›´å¥½çš„æ»¡è¶³è‡ªèº«çš„ä¸šåŠ¡éœ€æ±‚ä¸æŠ€æœ¯æ‹“å±•ã€‚

 ğŸ™‚ å¦å¤–ï¼Œé€šè¿‡å­¦ä¹ é¡¹ç›®çš„ OAuth 2.0 å®ç°ï¼Œå¯ä»¥è¿›ä¸€æ­¥åŠ æ·±å¯¹ OAuth 2.0 çš„ç†è§£ï¼ŒçŸ¥å…¶ç„¶ã€çŸ¥å…¶æ‰€ä»¥ç„¶ï¼

 æœ€ç»ˆå®ç°çš„æ•´ä½“æ¶æ„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

 ![æ•´ä½“æ¶æ„](https://doc.iocoder.cn/img/OAuth2/%E5%AE%9E%E7%8E%B0%E6%9E%B6%E6%9E%84%E5%9B%BE.png)

 è¯¦ç»†çš„ä»£ç å®ç°ï¼Œæˆ‘ä»¬åœ¨è§†é¢‘ä¸­è¿›è¡Œè®²è§£ã€‚

 ## [#](#å¦‚ä½•å®ç°-sso-å•ç‚¹ç™»å½•) å¦‚ä½•å®ç° SSO å•ç‚¹ç™»å½•ï¼Ÿ

 ### [#](#å®æˆ˜ä¸€-åŸºäºæˆæƒç æ¨¡å¼-å®ç°-sso-å•ç‚¹ç™»å½•) å®æˆ˜ä¸€ï¼šåŸºäºæˆæƒç æ¨¡å¼ï¼Œå®ç° SSO å•ç‚¹ç™»å½•

 ç¤ºä¾‹ä»£ç è§ [https://gitee.com/yudaocode/yudao-demo/tree/master/yudao-sso-demo-by-code  (opens new window)](https://gitee.com/yudaocode/yudao-demo/tree/master/yudao-sso-demo-by-code) åœ°å€ï¼Œæ•´ä½“æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

 ![æ•´ä½“æµç¨‹](https://doc.iocoder.cn/img/OAuth2/%E6%8E%88%E6%9D%83%E7%A0%81%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95.png)

 å…·ä½“çš„ä½¿ç”¨æµç¨‹å¦‚ä¸‹ï¼š

 **â‘  ç¬¬ä¸€æ­¥**ï¼Œåˆ†åˆ«å¯åŠ¨ `ruoyi-vue-pro` é¡¹ç›®çš„å‰ç«¯å’Œåç«¯ã€‚

 **â‘¡ ç¬¬äºŒæ­¥**ï¼Œè®¿é—® [ç³»ç»Ÿç®¡ç† -> OAuth 2.0 -> åº”ç”¨ç®¡ç†  (opens new window)](http://127.0.0.1:1024/system/oauth2/oauth2/application) èœå•ï¼Œæ–°å¢ä¸€ä¸ªåº”ç”¨ï¼ˆå®¢æˆ·ç«¯ï¼‰ï¼Œä¿¡æ¯å¦‚ä¸‹å›¾ï¼š

 ![æˆæƒç æ¨¡å¼çš„å®¢æˆ·ç«¯ä¿¡æ¯](https://doc.iocoder.cn/img/OAuth2/%E6%8E%88%E6%9D%83%E7%A0%81%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%BF%A1%E6%81%AF.png)

 * å®¢æˆ·ç«¯ç¼–å·ï¼š`yudao-sso-demo-by-code`
* å®¢æˆ·ç«¯å¯†é’¥ï¼š`test`
* åº”ç”¨åï¼š`åŸºäºæˆæƒç æ¨¡å¼ï¼Œå¦‚ä½•å®ç° SSO å•ç‚¹ç™»å½•ï¼Ÿ`
* æˆæƒç±»å‹ï¼š`authorization_code`ã€`refresh_token`
* æˆæƒèŒƒå›´ï¼š`user.read`ã€`user.write`
* å¯é‡å®šå‘çš„ URI åœ°å€ï¼š`http://127.0.0.1:18080`

 psï¼šå¦‚æœå·²ç»æœ‰è¿™ä¸ªå®¢æˆ·ç«¯ï¼Œå¯ä»¥ä¸ç”¨æ–°å¢ã€‚

 **â‘¢ ç¬¬ä¸‰æ­¥**ï¼Œè¿è¡Œ [SSODemoApplication  (opens new window)](https://gitee.com/yudaocode/yudao-demo/blob/master/yudao-sso-demo-by-code/src/main/java/cn/iocoder/yudao/ssodemo/SSODemoApplication.java) ç±»ï¼Œå¯åŠ¨æ¥å…¥æ–¹çš„é¡¹ç›®ï¼Œå®ƒå·²ç»åŒ…å«å‰ç«¯å’Œåç«¯éƒ¨åˆ†ã€‚å¯åŠ¨æˆåŠŸçš„æ—¥å¿—å¦‚ä¸‹ï¼š

 å‹æƒ…æç¤ºï¼šå¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Vue3 + element-plus çš„å‰ç«¯é¡¹ç›®ï¼Œä¸€å®šè¦æ“ä½œï¼ï¼ï¼

 éœ€è¦æŠŠ yudao-sso-demo-by-code çš„ `index.html` æ–‡ä»¶ä¸­çš„ `http://127.0.0.1:1024` æ”¹æˆ `http://127.0.0.1:8080`ï¼ï¼ï¼å¦åˆ™åœ¨åç»­çš„â€œæˆæƒå›è°ƒâ€æ—¶ï¼Œä¼šè·³è½¬å¤±è´¥å™¢ï¼ï¼ï¼

 
```
2022-10-01 21:24:35.572  INFO 60265 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 18080 (http) with context path ''

```
**â‘£ ç¬¬å››æ­¥**ï¼Œæµè§ˆå™¨è®¿é—® [http://127.0.0.1:18080/index.html  (opens new window)](http://127.0.0.1:18080/index.html) åœ°å€ï¼Œè¿›å…¥æ¥å…¥æ–¹çš„ index.html é¦–é¡µã€‚å› ä¸ºæš‚æœªç™»å½•ï¼Œå¯ä»¥ç‚¹å‡»ã€Œè·³è½¬ã€æŒ‰é’®ï¼Œè·³è½¬åˆ° `ruoyi-vue-pro` é¡¹ç›®çš„ SSO å•ç‚¹ç™»å½•é¡µã€‚

 ![æˆæƒç æ¨¡å¼çš„æœªç™»å½•é¦–é¡µ](https://doc.iocoder.cn/img/OAuth2/%E6%8E%88%E6%9D%83%E7%A0%81%E6%A8%A1%E5%BC%8F%E7%9A%84%E6%9C%AA%E7%99%BB%E5%BD%95%E9%A6%96%E9%A1%B5.png)

 ç–‘é—®ï¼šä¸ºä»€ä¹ˆæ²¡æœ‰è·³è½¬åˆ° SSO å•ç‚¹ç™»å½•é¡µï¼Œè€Œæ˜¯è·³è½¬åˆ° ruoyi-vue-pro é¡¹ç›®çš„ç™»å½•é¡µï¼Ÿ

 å› ä¸ºåœ¨ `ruoyi-vue-pro` é¡¹ç›®ä¹Ÿæœªç™»å½•ï¼Œæ‰€ä»¥å…ˆè·³è½¬åˆ°è¯¥é¡¹ç›®çš„ç™»å½•é¡µï¼Œä½¿ç”¨è´¦å·å¯†ç è¿›è¡Œç™»å½•ã€‚ç™»å½•å®Œæˆåï¼Œä¼šè·³è½¬å› SSO å•ç‚¹ç™»å½•é¡µï¼Œç»§ç»­å®Œæˆ OAuth 2.0 çš„æˆæƒæµç¨‹ã€‚

 **â‘¤ ç¬¬äº”æ­¥**ï¼Œå‹¾é€‰ "è®¿é—®ä½ çš„ä¸ªäººä¿¡æ¯" å’Œ "ä¿®æ”¹ä½ çš„ä¸ªäººä¿¡æ¯"ï¼Œç‚¹å‡»ã€ŒåŒæ„æˆæƒã€æŒ‰é’®ï¼Œå®Œæˆ code æˆæƒç çš„ç”³è¯·ã€‚

 ![åŒæ„æˆæƒ](https://doc.iocoder.cn/img/OAuth2/%E6%8E%88%E6%9D%83%E7%A0%81%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%90%8C%E6%84%8F%E6%8E%88%E6%9D%83.png)

 **â‘¥ ç¬¬å…­æ­¥**ï¼Œå®Œæˆæˆæƒåï¼Œä¼šè·³è½¬åˆ°æ¥å…¥æ–¹çš„ callback.html å›è°ƒé¡µï¼Œå¹¶åœ¨ URL ä¸Šå¯ä»¥çœ‹åˆ° code æˆæƒç ã€‚

 ![æˆæƒç æ¨¡å¼çš„å›è°ƒè·³è½¬](https://doc.iocoder.cn/img/OAuth2/%E6%8E%88%E6%9D%83%E7%A0%81%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%9B%9E%E8%B0%83%E8%B7%B3%E8%BD%AC.png)

 **â‘¦ ç¬¬ä¸ƒæ­¥**ï¼Œç‚¹å‡»ã€Œç¡®è®¤ã€æŒ‰é’®ï¼Œæ¥å…¥æ–¹çš„å‰ç«¯ä¼šä½¿ç”¨ code æˆæƒç ï¼Œå‘æ¥å…¥æ–¹çš„åç«¯è·å– accessToken è®¿é—®ä»¤ç‰Œã€‚

 è€Œæ¥å…¥æ–¹çš„åç«¯ï¼Œä½¿ç”¨æ¥æ”¶åˆ°çš„ code æˆæƒç ï¼Œé€šè¿‡è°ƒç”¨ `ruoyi-vue-pro` é¡¹ç›®çš„åç«¯ï¼Œè·å–åˆ° accessToken è®¿é—®ä»¤ç‰Œï¼Œå¹¶æœ€ç»ˆè¿”å›ç»™æ¥å…¥æ–¹çš„å‰ç«¯ã€‚

 **â‘§ ç¬¬å…«æ­¥**ï¼Œåœ¨æ¥å…¥æ–¹çš„å‰ç«¯æ‹¿åˆ° accessToken è®¿é—®ä»¤ç‰Œåï¼Œè·³è½¬å›è‡ªå·±çš„ index.html é¦–é¡µï¼Œå¹¶è¿›ä¸€æ­¥ä» `ruoyi-vue-pro` é¡¹ç›®è·å–åˆ°è¯¥ç”¨æˆ·çš„æ˜µç§°ç­‰ä¸ªäººä¿¡æ¯ã€‚åç»­ï¼Œä½ å¯ä»¥æ‰§è¡Œã€Œä¿®æ”¹æ˜µç§°ã€ã€ã€Œåˆ·æ–°ä»¤ç‰Œã€ã€ã€Œé€€å‡ºç™»å½•ã€ç­‰æ“ä½œã€‚

 ![æˆæƒç æ¨¡å¼çš„ç™»å½•åé¦–é¡µ](https://doc.iocoder.cn/img/OAuth2/%E6%8E%88%E6%9D%83%E7%A0%81%E6%A8%A1%E5%BC%8F%E7%9A%84%E7%99%BB%E5%BD%95%E5%90%8E%E9%A6%96%E9%A1%B5.png)

 

---

 ç¤ºä¾‹ä»£ç çš„å…·ä½“å®ç°ï¼Œä¸è¯¦ç»†çš„è§£æï¼Œå¯ä»¥è§‚çœ‹å¦‚ä¸‹è§†é¢‘ï¼š

 * [02ã€åŸºäºæˆæƒç æ¨¡å¼ï¼Œå¦‚ä½•å®ç° SSO å•ç‚¹ç™»å½•ï¼Ÿ  (opens new window)](https://t.zsxq.com/06fUne6yZ)
* [03ã€è¯·æ±‚æ—¶ï¼Œå¦‚ä½•æ ¡éªŒ accessToken è®¿é—®ä»¤ç‰Œï¼Ÿ  (opens new window)](https://t.zsxq.com/06iuNRvjM)
* [04ã€è®¿é—®ä»¤ç‰Œè¿‡æœŸæ—¶ï¼Œå¦‚ä½•åˆ·æ–° Token ä»¤ç‰Œï¼Ÿ  (opens new window)](https://t.zsxq.com/06jAqFimu)
* [05ã€ç™»å½•æˆåŠŸåï¼Œå¦‚ä½•è·å¾—ç”¨æˆ·ä¿¡æ¯ï¼Ÿ  (opens new window)](https://t.zsxq.com/06ne6e6aE)
* [06ã€é€€å‡ºæ—¶ï¼Œå¦‚ä½•åˆ é™¤ Token ä»¤ç‰Œï¼Ÿ  (opens new window)](https://t.zsxq.com/06fUJIUfq)

 ### [#](#å®æˆ˜äºŒ-åŸºäºå¯†ç æ¨¡å¼-å®ç°-sso-ç™»å½•) å®æˆ˜äºŒï¼šåŸºäºå¯†ç æ¨¡å¼ï¼Œå®ç° SSO ç™»å½•

 ç¤ºä¾‹ä»£ç è§ [https://gitee.com/yudaocode/yudao-demo/tree/master/yudao-sso-demo-by-password  (opens new window)](https://gitee.com/yudaocode/yudao-demo/tree/master/yudao-sso-demo-by-password) åœ°å€ï¼Œæ•´ä½“æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

 ![æ•´ä½“æµç¨‹](https://doc.iocoder.cn/img/OAuth2/%E5%AF%86%E7%A0%81%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95.png)

 å…·ä½“çš„ä½¿ç”¨æµç¨‹å¦‚ä¸‹ï¼š

 **â‘  ç¬¬ä¸€æ­¥**ï¼Œåˆ†åˆ«å¯åŠ¨ `ruoyi-vue-pro` é¡¹ç›®çš„å‰ç«¯å’Œåç«¯ã€‚æ³¨æ„ï¼Œå‰ç«¯éœ€è¦ä½¿ç”¨ Vue2 ç‰ˆæœ¬ï¼Œå› ä¸º Vue3 ç‰ˆæœ¬æš‚æ—¶æ²¡æœ‰å®ç° SSO é¡µé¢ã€‚

 **â‘¡ ç¬¬äºŒæ­¥**ï¼Œè®¿é—® [ç³»ç»Ÿç®¡ç† -> OAuth 2.0 -> åº”ç”¨ç®¡ç†  (opens new window)](http://127.0.0.1:1024/system/oauth2/oauth2/application) èœå•ï¼Œæ–°å¢ä¸€ä¸ªåº”ç”¨ï¼ˆå®¢æˆ·ç«¯ï¼‰ï¼Œä¿¡æ¯å¦‚ä¸‹å›¾ï¼š

 ![å¯†ç æ¨¡å¼çš„å®¢æˆ·ç«¯ä¿¡æ¯](https://doc.iocoder.cn/img/OAuth2/%E5%AF%86%E7%A0%81%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%BF%A1%E6%81%AF.png)

 * å®¢æˆ·ç«¯ç¼–å·ï¼š`yudao-sso-demo-by-password`
* å®¢æˆ·ç«¯å¯†é’¥ï¼š`test`
* åº”ç”¨åï¼š`åŸºäºå¯†ç æ¨¡å¼ï¼Œå¦‚ä½•å®ç° SSO å•ç‚¹ç™»å½•ï¼Ÿ`
* æˆæƒç±»å‹ï¼š`password`ã€`refresh_token`
* æˆæƒèŒƒå›´ï¼š`user.read`ã€`user.write`
* å¯é‡å®šå‘çš„ URI åœ°å€ï¼š`http://127.0.0.1:18080`

 psï¼šå¦‚æœå·²ç»æœ‰è¿™ä¸ªå®¢æˆ·ç«¯ï¼Œå¯ä»¥ä¸ç”¨æ–°å¢ã€‚

 **â‘¢ ç¬¬ä¸‰æ­¥**ï¼Œè¿è¡Œ [SSODemoApplication  (opens new window)](https://gitee.com/yudaocode/yudao-demo/blob/master/yudao-sso-demo-by-password/src/main/java/cn/iocoder/yudao/ssodemo/SSODemoApplication.java) ç±»ï¼Œå¯åŠ¨æ¥å…¥æ–¹çš„é¡¹ç›®ï¼Œå®ƒå·²ç»åŒ…å«å‰ç«¯å’Œåç«¯éƒ¨åˆ†ã€‚å¯åŠ¨æˆåŠŸçš„æ—¥å¿—å¦‚ä¸‹ï¼š

 
```
2022-10-04 21:24:35.572  INFO 60265 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 18080 (http) with context path ''

```
**â‘£ ç¬¬å››æ­¥**ï¼Œæµè§ˆå™¨è®¿é—® [http://127.0.0.1:18080/index.html  (opens new window)](http://127.0.0.1:18080/index.html) åœ°å€ï¼Œè¿›å…¥æ¥å…¥æ–¹çš„ index.html é¦–é¡µã€‚å› ä¸ºæš‚æœªç™»å½•ï¼Œå¯ä»¥ç‚¹å‡»ã€Œè·³è½¬ã€æŒ‰é’®ï¼Œè·³è½¬åˆ° login.html ç™»å½•é¡µã€‚

 ![å¯†ç æ¨¡å¼çš„æœªç™»å½•é¦–é¡µ](https://doc.iocoder.cn/img/OAuth2/%E5%AF%86%E7%A0%81%E6%A8%A1%E5%BC%8F%E7%9A%84%E6%9C%AA%E7%99%BB%E5%BD%95%E9%A6%96%E9%A1%B5.png)

 ![å¯†ç æ¨¡å¼çš„æœªç™»å½•é¦–é¡µ2](https://doc.iocoder.cn/img/OAuth2/%E5%AF%86%E7%A0%81%E6%A8%A1%E5%BC%8F%E7%9A%84%E6%9C%AA%E7%99%BB%E5%BD%95%E9%A6%96%E9%A1%B52.png)

 **â‘¤ ç¬¬äº”æ­¥**ï¼Œç‚¹å‡»ã€Œç™»å½•ã€æŒ‰é’®ï¼Œè°ƒç”¨ `ruoyi-vue-pro` é¡¹ç›®çš„åç«¯ï¼Œè·å–åˆ° accessToken è®¿é—®ä»¤ç‰Œï¼Œå®Œæˆç™»å½•æ“ä½œã€‚

 ![å¯†ç æ¨¡å¼çš„å‘èµ·ç™»å½•.png](https://doc.iocoder.cn/img/OAuth2/%E5%AF%86%E7%A0%81%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%8F%91%E8%B5%B7%E7%99%BB%E5%BD%95.png)

 **â‘¥ ç¬¬å…­æ­¥**ï¼Œç™»å½•å®Œæˆåï¼Œè·³è½¬å›è‡ªå·±çš„ index.html é¦–é¡µï¼Œå¹¶è¿›ä¸€æ­¥ä» `ruoyi-vue-pro` é¡¹ç›®è·å–åˆ°è¯¥ç”¨æˆ·çš„æ˜µç§°ç­‰ä¸ªäººä¿¡æ¯ã€‚åç»­ï¼Œä½ å¯ä»¥æ‰§è¡Œã€Œä¿®æ”¹æ˜µç§°ã€ã€ã€Œåˆ·æ–°ä»¤ç‰Œã€ã€ã€Œé€€å‡ºç™»å½•ã€ç­‰æ“ä½œã€‚

 ![å¯†ç æ¨¡å¼çš„ç™»å½•åé¦–é¡µ](https://doc.iocoder.cn/img/OAuth2/%E5%AF%86%E7%A0%81%E6%A8%A1%E5%BC%8F%E7%9A%84%E7%99%BB%E5%BD%95%E5%90%8E%E9%A6%96%E9%A1%B5.png)

 

---

 ç¤ºä¾‹ä»£ç çš„å…·ä½“å®ç°ï¼Œä¸è¯¦ç»†çš„è§£æï¼Œå¯ä»¥è§‚çœ‹å¦‚ä¸‹è§†é¢‘ï¼š

 * [07ã€åŸºäºå¯†ç æ¨¡å¼ï¼Œå¦‚ä½•å®ç° SSO å•ç‚¹ç™»å½•ï¼Ÿ  (opens new window)](https://t.zsxq.com/06rrrzBAu)

 ## [#](#oauth-2-0-è¡¨ç»“æ„) OAuth 2.0 è¡¨ç»“æ„

 ![è¡¨ç»“æ„](https://doc.iocoder.cn/img/OAuth2/%E8%A1%A8%E7%BB%93%E6%9E%84.png)

 æ¯ä¸ªè¡¨çš„å…·ä½“è®¾è®¡ï¼Œä¸è¯¦ç»†çš„è§£æï¼Œå¯ä»¥è§‚çœ‹å¦‚ä¸‹è§†é¢‘ï¼š

 * [08ã€å¦‚ä½•å®ç°å®¢æˆ·ç«¯çš„ç®¡ç†ï¼Ÿ  (opens new window)](https://t.zsxq.com/06ubEmeII)
* [09ã€å•ç‚¹ç™»å½•ç•Œé¢ï¼Œå¦‚ä½•è¿›è¡Œåˆå§‹åŒ–ï¼Ÿ  (opens new window)](https://t.zsxq.com/06qjm2rbQ)
* [10ã€å•ç‚¹ç™»å½•ç•Œé¢ï¼Œå¦‚ä½•è¿›è¡Œã€æ‰‹åŠ¨ã€‘æˆæƒï¼Ÿ  (opens new window)](https://t.zsxq.com/06AEQfA2j)
* [11ã€å•ç‚¹ç™»å½•ç•Œé¢ï¼Œå¦‚ä½•è¿›è¡Œã€è‡ªåŠ¨ã€‘æˆæƒï¼Ÿ  (opens new window)](https://t.zsxq.com/06JIQvrrN)
* [12ã€åŸºäºã€æˆæƒç ã€‘æ¨¡å¼ï¼Œå¦‚ä½•è·å¾— Token ä»¤ç‰Œï¼Ÿ  (opens new window)](https://t.zsxq.com/06jEQZNfE)
* [13ã€åŸºäºã€å¯†ç ã€‘æ¨¡å¼ï¼Œå¦‚ä½•è·å¾— Token ä»¤ç‰Œï¼Ÿ  (opens new window)](https://t.zsxq.com/06aEynUZF)
* [14ã€å¦‚ä½•æ ¡éªŒã€åˆ·æ–°ã€åˆ é™¤è®¿é—®ä»¤ç‰Œï¼Ÿ  (opens new window)](https://t.zsxq.com/06MbM3n2v)
